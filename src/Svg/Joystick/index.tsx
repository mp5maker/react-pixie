import * as React from 'react';
import { AnimatePresence, motion } from 'framer-motion';
import { useKeyboard } from 'Hooks/UseKeyboard';

const svgVariant = {
  initial: {},
  animate: {},
  exit: {},
};

const pathVariantOne = {
  initial: {},
  animate: {},
  exit: {},
};

const KEY_A = 65;
const KEY_S = 83;

export const Joystick = ({
  colors,
  theme,
  width = 171,
  height = 226,
  svgKey = '',
  svgVariants = svgVariant,
  pathVariant = pathVariantOne,
}: any) => {
  const { keyCode }: any = useKeyboard({ allow: true });
  const isKeyA = keyCode == KEY_A;
  const isKeyS = keyCode == KEY_S;

  return (
    <AnimatePresence exitBeforeEnter initial={true}>
      <motion.svg
        key={`joystick-svg-${svgKey}`}
        variants={svgVariants}
        initial={`initial`}
        animate={`animate`}
        exit={`exit`}
        width={width}
        height={height}
        viewBox="0 0 171 226"
        fill="transparent"
        xmlns="http://www.w3.org/2000/svg">
        <g className="joystick">
          <g className="joystick-body">
            <path
              className="Vector 1"
              d="M24 55.5H43L48.5 64.5L55 71L61.5 75.5L69 78.5L75.5 80.5V136.5L77 140.5L81 143.5L84.5 144L88.5 142L91.5 137.5V81L95.5 79.5L105 75.5L112.5 70L118 64L123.5 55.5H148L155 57L161 61L165.5 66L168.5 71L170.5 77.5V205L168.5 211.5L167 214L164.5 217L162 220L158.5 222.5L153.5 224.5L147.5 225.5H21L18 225L11.5 221.5L6.5 217.5L2 210L1 207L0.5 205V82V77L1.5 72.5L3.5 68.5L5 66.5L7.5 64L10.5 61L14.5 58.5L18.5 56.5L22 55.5H24Z"
              fill={colors[theme].primaryColor}
              stroke={colors[theme].primaryColor}
            />
            <g className="Ellipse 5">
              <mask
                className="path-2-inside-1"
                fill={colors[theme].backgroundColor}>
                <path d="M68.1666 84.963C57.8706 88.8257 49.2767 96.2123 43.911 105.811C38.5454 115.41 36.7552 126.6 38.8584 137.394C40.9616 148.187 46.8221 157.886 55.3992 164.768C63.9762 171.65 74.7147 175.27 85.7077 174.984C96.7007 174.699 107.237 170.526 115.445 163.208C123.653 155.89 129.002 145.9 130.542 135.011C132.082 124.123 129.713 113.041 123.856 103.734C117.999 94.4268 109.033 87.4964 98.5506 84.1736L96.3865 91.0008C105.255 93.8118 112.84 99.6748 117.794 107.549C122.749 115.422 124.753 124.797 123.45 134.009C122.148 143.22 117.623 151.671 110.679 157.862C103.735 164.053 94.8216 167.583 85.5217 167.825C76.2218 168.066 67.1373 165.004 59.8813 159.182C52.6253 153.36 47.6674 145.155 45.8882 136.024C44.1089 126.892 45.6233 117.426 50.1626 109.306C54.7018 101.185 61.9721 94.9363 70.6823 91.6686L68.1666 84.963Z" />
              </mask>
              <path
                d="M68.1666 84.963C57.8706 88.8257 49.2767 96.2123 43.911 105.811C38.5454 115.41 36.7552 126.6 38.8584 137.394C40.9616 148.187 46.8221 157.886 55.3992 164.768C63.9762 171.65 74.7147 175.27 85.7077 174.984C96.7007 174.699 107.237 170.526 115.445 163.208C123.653 155.89 129.002 145.9 130.542 135.011C132.082 124.123 129.713 113.041 123.856 103.734C117.999 94.4268 109.033 87.4964 98.5506 84.1736L96.3865 91.0008C105.255 93.8118 112.84 99.6748 117.794 107.549C122.749 115.422 124.753 124.797 123.45 134.009C122.148 143.22 117.623 151.671 110.679 157.862C103.735 164.053 94.8216 167.583 85.5217 167.825C76.2218 168.066 67.1373 165.004 59.8813 159.182C52.6253 153.36 47.6674 145.155 45.8882 136.024C44.1089 126.892 45.6233 117.426 50.1626 109.306C54.7018 101.185 61.9721 94.9363 70.6823 91.6686L68.1666 84.963Z"
                fill={colors[theme].backgroundColor}
                stroke={colors[theme].backgroundColor}
                strokeWidth="2"
                mask="url(#path-2-inside-1)"
              />
            </g>
            <path
              className="Ellipse 9"
              d="M115.852 201.366C114.664 203.895 115.746 206.956 118.441 207.695C122.397 208.78 126.555 209.033 130.648 208.416C136.417 207.545 141.799 204.983 146.112 201.054C150.425 197.125 153.476 192.005 154.88 186.342C155.875 182.324 156.01 178.161 155.297 174.121C154.812 171.369 151.865 170.006 149.237 170.954V170.954C146.608 171.902 145.319 174.815 145.556 177.6C145.736 179.704 145.571 181.835 145.057 183.908C144.135 187.628 142.131 190.992 139.297 193.573C136.463 196.154 132.928 197.837 129.138 198.409C127.027 198.728 124.89 198.694 122.811 198.319C120.061 197.824 117.04 198.837 115.852 201.366V201.366Z"
              fill={colors[theme].backgroundColor}
            />
            <circle
              className="Ellipse 10"
              cx="33"
              cy="191"
              r="16"
              fill={
                isKeyS
                  ? colors[theme].dangerColor
                  : colors[theme].backgroundColor
              }
            />
          </g>
          <path
            className="s"
            d="M32.76 185.22C33.48 185.22 34.1267 185.32 34.7 185.52C35.2733 185.72 35.82 186.02 36.34 186.42L35.56 187.58C35.08 187.273 34.62 187.047 34.18 186.9C33.7533 186.753 33.3 186.68 32.82 186.68C32.22 186.68 31.7467 186.807 31.4 187.06C31.0533 187.3 30.88 187.633 30.88 188.06C30.88 188.487 31.04 188.82 31.36 189.06C31.6933 189.3 32.2867 189.533 33.14 189.76C34.3133 190.053 35.1867 190.453 35.76 190.96C36.3467 191.467 36.64 192.16 36.64 193.04C36.64 194.08 36.2333 194.873 35.42 195.42C34.62 195.967 33.64 196.24 32.48 196.24C30.88 196.24 29.5533 195.78 28.5 194.86L29.48 193.74C30.3733 194.42 31.36 194.76 32.44 194.76C33.1333 194.76 33.68 194.62 34.08 194.34C34.4933 194.047 34.7 193.653 34.7 193.16C34.7 192.8 34.6267 192.513 34.48 192.3C34.3333 192.073 34.08 191.88 33.72 191.72C33.36 191.547 32.8333 191.367 32.14 191.18C31.02 190.887 30.2067 190.493 29.7 190C29.2067 189.507 28.96 188.88 28.96 188.12C28.96 187.573 29.12 187.08 29.44 186.64C29.7733 186.187 30.2267 185.84 30.8 185.6C31.3867 185.347 32.04 185.22 32.76 185.22Z"
            fill={colors[theme].primaryColor}
          />
          <g className="joystick-head">
            <circle
              className="joystick-head-body"
              cx="84"
              cy="37"
              r="37"
              fill={
                isKeyA ? colors[theme].dangerColor : colors[theme].primaryColor
              }
            />
            <path
              className="Ellipse 8"
              d="M80.8509 9.65914C80.7489 8.88099 80.0345 8.32937 79.2622 8.4687C72.9523 9.60698 67.1705 12.7739 62.8078 17.5075C58.4451 22.2412 55.7594 28.2616 55.1386 34.6432C55.0627 35.4243 55.6706 36.0914 56.4545 36.1297V36.1297C57.2383 36.168 57.9009 35.5629 57.9809 34.7821C58.5666 29.066 60.9863 23.6775 64.8976 19.4336C68.809 15.1897 73.9826 12.3394 79.6321 11.2902C80.4037 11.1469 80.9529 10.4373 80.8509 9.65914V9.65914Z"
              fill={colors[theme].backgroundColor}
            />
            <path
              className="a"
              d="M88 41.54C88 41.9667 88.0733 42.2867 88.22 42.5C88.3667 42.7 88.5867 42.8533 88.88 42.96L88.46 44.24C87.9133 44.1733 87.4733 44.02 87.14 43.78C86.8067 43.54 86.56 43.1667 86.4 42.66C85.6933 43.7133 84.6467 44.24 83.26 44.24C82.22 44.24 81.4 43.9467 80.8 43.36C80.2 42.7733 79.9 42.0067 79.9 41.06C79.9 39.94 80.3 39.08 81.1 38.48C81.9133 37.88 83.06 37.58 84.54 37.58H86.16V36.8C86.16 36.0533 85.98 35.52 85.62 35.2C85.26 34.88 84.7067 34.72 83.96 34.72C83.1867 34.72 82.24 34.9067 81.12 35.28L80.66 33.94C81.9667 33.46 83.18 33.22 84.3 33.22C85.54 33.22 86.4667 33.5267 87.08 34.14C87.6933 34.74 88 35.6 88 36.72V41.54ZM83.68 42.86C84.7333 42.86 85.56 42.3133 86.16 41.22V38.8H84.78C82.8333 38.8 81.86 39.52 81.86 40.96C81.86 41.5867 82.0133 42.06 82.32 42.38C82.6267 42.7 83.08 42.86 83.68 42.86Z"
              fill={colors[theme].backgroundColor}
            />
          </g>
        </g>
      </motion.svg>
    </AnimatePresence>
  );
};
